---
name: dev-brainstorm
description: "在任何创造性工作前使用 - 创建功能、构建组件、添加功能或修改行为。通过协作对话将想法转化为完整的设计和规范。"
---

# 头脑风暴：从想法到设计

## 概述

通过自然的协作对话帮助用户将想法转化为完整的设计和规格说明。

首先理解当前项目上下文，然后一次一个问题来完善想法。一旦理解了要构建的内容，就分段展示设计（每段200-300字），并在每段后确认是否符合预期。

## 何时启用

- 创建新功能或模块
- 构建新组件或页面
- 添加新的行为或能力
- 修改现有行为
- 解决复杂问题前的方案探索
- 与 `dev-plan` 配合：确定做什么之后、计划怎么做之前

## 流程

### 阶段 1: 理解想法

- 首先检查当前项目状态（文件、文档、最近提交）
- 一次只问一个问题来完善想法
- 尽可能使用多选题，开放式问题也可接受
- 每个消息只问一个问题 - 如果一个话题需要更多探索，拆分成多个问题
- 重点关注：目的、约束条件、成功标准

**示例问题:**
- "这个功能主要解决什么用户痛点？"
- "你期望的时间范围是？A) 本周 B) 本月 C) 本季度"
- "有哪些技术约束需要遵守？"

### 阶段 2: 探索方案

- 提出 2-3 种不同方案并权衡利弊
- 以对话方式呈现选项，给出推荐和理由
- 先给出推荐选项并解释原因

**呈现结构:**
```
方案 A (推荐): [简述]
优点: ...
缺点: ...

方案 B: [简述]
优点: ...
缺点: ...

方案 C: [简述]
优点: ...
缺点: ...
```

### 阶段 3: 展示设计

- 一旦认为理解了要构建的内容，开始展示设计
- 分成 200-300 字的段落
- 每段后询问是否符合预期
- 覆盖：架构、组件、数据流、错误处理、测试策略
- 如果不清楚的地方，随时返回澄清

**设计内容清单:**
- [ ] 整体架构概述
- [ ] 核心组件/模块划分
- [ ] 数据流和状态管理
- [ ] API/接口设计
- [ ] 错误处理策略
- [ ] 测试覆盖方案
- [ ] 性能考量
- [ ] 安全考虑

## 设计完成后

### 文档记录

- 将验证过的设计写入 `.plans/YYYY-MM-DD-<topic>-design.md`
- 提交设计文档到 git
- 建议随后使用 `dev-plan` 创建详细实施计划

### 进入实施（如果继续）

- 询问："是否准备开始实施？"
- 建议创建 feature branch
- 使用 `dev-plan` 创建详细实施计划
- 使用 `dev-tdd-workflow` 执行开发

## 关键原则

| 原则 | 说明 |
|------|------|
| **一次一个问题** | 不要用多个问题压倒用户 |
| **偏好多选题** | 回答选择题比开放式问题更容易 |
| **严格 YAGNI** | 从所有设计中无情移除不必要的功能 |
| **探索替代方案** | 确定前总是提出 2-3 种方法 |
| **增量验证** | 分段展示设计，逐段验证 |
| **保持灵活** | 当不清楚时返回澄清 |

## YAGNI 检查清单

设计时对照检查，移除不必要的功能：

- [ ] 这个功能真的需要吗？还是"可能"需要？
- [ ] 能否通过更简单的方式实现相同目标？
- [ ] 这个功能是否超出了当前问题的范围？
- [ ] 是否有证据表明用户真的需要这个功能？
- [ ] 延迟实现这个功能会有什么风险？

## 与 dev-plan 的协作

```
[想法] → dev-brainstorm → [设计] → dev-plan → [实施计划] → dev-tdd-workflow → [代码]
```

**brainstorming 输出** 作为 **plan 输入**:
- 设计文档中确认的功能范围
- 推荐的架构方案
- 明确的约束条件和成功标准
- 识别出的风险和注意事项
