---
name: deep-research
description: 分层多智能体深度研究系统，用于执行复杂的深度研究任务。当用户需要：(1) 进行多步骤、多角度的深度研究，(2) 需要系统性地搜索、分析和综合信息，(3) 处理需要分解为子任务的复杂查询，(4) 需要结合网络搜索、内容分析和信息整合的研究任务时使用此技能。
---

# 深度研究 (Deep Research)

## 概述

本技能基于 DeepResearchAgent 的分层多智能体架构，提供系统性的深度研究方法论。通过顶层规划智能体协调多个专业子智能体，实现任务的自动分解与高效执行。

核心特点：
- **分层架构**：规划层 + 执行层的清晰分工
- **任务分解**：将复杂研究任务拆分为可管理的子任务
- **迭代深入**：多轮搜索、分析、综合的研究循环
- **工具协同**：搜索、浏览、分析、代码执行等工具的组合使用

## 架构组成

### 1. 顶层规划智能体 (Planning Agent)

负责整体任务的理解、分解和协调：

- **任务理解**：分析用户需求的本质和目标
- **任务分解**：将复杂任务拆分为 ≤5 个可管理的子任务
- **智能体调度**：为每个子任务分配合适的专业智能体
- **进度跟踪**：监控各子任务的执行状态和结果
- **结果整合**：综合各子任务输出，形成最终答案

### 2. 专业子智能体

#### 深度研究者 (Deep Researcher)
执行迭代式深度网络研究：
- 优化搜索查询以提高搜索效果
- 多层级搜索（默认深度 2-3 层）
- 从搜索结果中提取关键洞察
- 生成后续查询以填补知识空白
- 综合研究结果生成结构化报告

#### 深度分析器 (Deep Analyzer)
执行系统性内容分析：
- 对输入信息进行深入分析
- 提取关键信息和潜在需求
- 支持文本和结构化数据分析
- 识别模式、趋势和关联

#### 浏览器操作员 (Browser Use)
执行浏览器自动化任务：
- 网页搜索和信息提取
- 与网页交互获取动态内容
- 支持复杂的网页导航
- 为研究者提供实时网页信息

#### 通用工具调用 (General Tool)
执行各类工具调用：
- Python 代码执行（带沙箱限制）
- 文件读写操作
- API 调用和数据处理
- 支持自定义工具集成

## 工作流程

### 阶段 1：任务理解与规划

```
用户请求 → 理解需求 → 分解任务 → 制定计划
```

**关键步骤**：
1. 分析用户请求的核心目标和约束条件
2. 识别需要回答的关键问题
3. 将任务分解为 ≤5 个逻辑步骤
4. 为每个步骤选择合适的智能体
5. 创建可跟踪的执行计划

### 阶段 2：并行执行

```
计划 → 分配子任务 → 并行执行 → 收集结果
```

**执行策略**：
- 独立的子任务并行执行以提高效率
- 有依赖关系的子任务按顺序执行
- 实时监控执行状态和中间结果
- 必要时动态调整计划

### 阶段 3：结果整合

```
子结果 → 综合分析 → 去重验证 → 生成报告
```

**整合原则**：
- 识别并合并重复信息
- 验证各子结果之间的一致性
- 按逻辑结构组织最终输出
- 标注信息来源和可信度

## 使用方法

### 基本研究流程

当用户提出研究需求时，按以下步骤执行：

**Step 1: 创建研究计划**
```
使用 planning_tool 创建计划：
- plan_id: 唯一标识符
- title: 研究主题
- steps: 具体研究步骤（≤5步）
```

**Step 2: 执行研究步骤**
```
对每个步骤：
1. 标记步骤为 "in_progress"
2. 调用合适的子智能体执行任务
3. 收集并记录结果
4. 标记步骤为 "completed"
```

**Step 3: 综合结果**
```
整合所有步骤的输出：
- 汇总关键发现
- 识别知识空白
- 生成结构化报告
```

### 研究策略

#### 策略 1：广度优先探索
适用于需要全面了解某个主题的场景：
- 先进行广泛的初步搜索
- 识别关键子主题
- 对每个子主题进行深入研究

#### 策略 2：深度优先挖掘
适用于需要深入理解特定问题的场景：
- 从核心问题开始
- 逐层深入挖掘相关信息
- 追踪引用和关联内容

#### 策略 3：验证导向研究
适用于需要验证特定假设的场景：
- 明确待验证的假设
- 搜索支持/反驳的证据
- 评估证据质量和可信度

## 最佳实践

### 查询优化

**优化原则**：
- 使用具体、明确的关键词
- 包含必要的上下文信息
- 避免模糊或过于宽泛的表述
- 考虑使用专业术语

**示例**：
```
❌ "介绍一下 AI"
✅ "2024年大语言模型在代码生成领域的最新进展和主要技术路线"
```

### 信息源评估

**可信度评估标准**：
- 来源权威性（学术期刊、官方文档、知名机构）
- 信息时效性（发布日期、更新频率）
- 内容完整性（是否提供充分证据）
- 作者专业性（背景、资质）

**交叉验证**：
- 从多个独立来源验证关键信息
- 对比不同来源的观点和数据
- 识别潜在的偏见或错误

### 结果组织

**结构化输出**：
```markdown
# 研究报告：[主题]

## 执行摘要
- 核心发现（3-5条）
- 主要结论

## 详细发现
### [子主题1]
- 关键信息
- 来源引用

### [子主题2]
...

## 信息来源
- 来源列表及可信度评估

## 局限性说明
- 信息缺口
- 不确定性
```

## 工具使用指南

### 规划工具 (Planning Tool)

**创建计划**：
```python
action: "create"
plan_id: "research_001"
title: "AI Agent 研究"
steps: [
  "搜索 AI Agent 最新论文",
  "分析主要技术架构",
  "对比不同实现方案",
  "总结发展趋势"
]
```

**更新步骤状态**：
```python
action: "mark_step"
plan_id: "research_001"
step_index: 0
step_status: "in_progress"  # not_started | in_progress | completed | blocked
step_notes: "已找到 15 篇相关论文"
```

### 深度研究工具 (Deep Researcher Tool)

**参数说明**：
- `query`: 研究查询（会被自动优化）
- `max_depth`: 最大研究深度（默认 2，范围 1-5）
- `time_limit_seconds`: 时间限制（默认 120 秒）

**输出格式**：
```markdown
# Research: [查询主题]
**Sources**: [访问URL数量] | **Depth**: [研究深度]

## Key Findings
[高相关性洞察]

## Additional Information
[中等相关性洞察]

## Supplementary Information
[低相关性洞察]
```

### Python 解释器工具

**使用场景**：
- 数据处理和分析
- 数学计算
- 文件操作
- API 调用

**安全限制**：
- 受限的 Python 内置函数
- 受控的模块导入
- 资源使用限制

## 示例场景

### 场景 1：技术调研

**用户请求**："调研当前主流的 RAG (检索增强生成) 技术方案"

**执行计划**：
1. 搜索 RAG 技术的最新论文和综述
2. 分析主流 RAG 框架的架构特点
3. 对比不同方案的优缺点
4. 总结最佳实践和发展趋势

### 场景 2：竞品分析

**用户请求**："对比分析 OpenAI、Claude、Gemini 三个大模型的能力差异"

**执行计划**：
1. 搜索三个模型的官方能力和基准测试结果
2. 查找第三方评测和用户反馈
3. 分析各自的技术特点和适用场景
4. 生成对比表格和选择建议

### 场景 3：问题解决

**用户请求**："排查 Python 异步代码中的性能瓶颈"

**执行计划**：
1. 分析用户提供的代码
2. 搜索相关性能优化最佳实践
3. 使用 Python 工具执行性能分析
4. 提供优化建议和修改方案

## 注意事项

### 时间控制
- 单个子任务设置合理的时间限制
- 避免在单一方向上过度深入
- 优先处理高价值的信息源

### 质量平衡
- 在广度和深度之间取得平衡
- 不追求 100% 完整，关注核心需求
- 明确标注不确定或待验证的信息

### 资源管理
- 合理分配各子任务的计算资源
- 缓存中间结果避免重复计算
- 及时清理不必要的状态数据

## 故障处理

### 常见问题和解决方案

**问题：搜索结果质量不高**
- 优化查询关键词
- 尝试不同的搜索引擎
- 使用更具体的专业术语

**问题：子任务执行失败**
- 检查错误信息
- 尝试替代方案
- 必要时调整计划

**问题：信息冲突或不一致**
- 查找更多来源进行交叉验证
- 评估各来源的可信度
- 在报告中说明分歧点
